<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>

</body>

<!-- 
      1. 先去请求接口 A
      2. 在接口 A 获取到数据之后，再去请求接口 B
      3. 在接口 B 获取到数据之后，再去请求接口 C
      4. 在接口 C 获取到数据之后，再去请求接口 D
 -->
<script>
  const isA = true
  const isB = true
  const isC = true
  const isD = true
  function A() {
    // 1. 创建 Promise 实例
    // 2. 构造函数中接收一个回调函数
    // 3. resolve：是一个回调函数，表示 Promise 执行成功
    // 4. reject：是一个回调函数，表示 Promise 执行失败
    return new Promise((resolve, reject) => {
      // 5. 处于 待定（pending） 下，代码会立刻执行
      console.log('执行接口 A 的逻辑');
      setTimeout(() => {
        if (isA) {
          // 执行成功 -> 已兑现（fulfilled）
          resolve('接口 A 执行完成')
        } else {
          // 执行失败 -> 已拒绝（rejected）
          reject('接口 A 执行失败')
        }
      }, 1 * 1000);
    })
  }
  function B() {
    return new Promise((resolve, reject) => {
      console.log('执行接口 B 的逻辑');
      setTimeout(() => {
        if (isB) {
          resolve('接口 B 执行完成')
        } else {
          reject('接口 B 执行失败')
        }
      }, 1 * 1000);
    })
  }
  function C() {
    return new Promise((resolve, reject) => {
      console.log('执行接口 C 的逻辑');
      setTimeout(() => {
        if (isC) {
          resolve('接口 C 执行完成')
        } else {
          reject('接口 C 执行失败')
        }
      }, 1 * 1000);
    })
  }
  function D() {
    return new Promise((resolve, reject) => {
      console.log('执行接口 D 的逻辑');
      setTimeout(() => {
        if (isD) {
          resolve('接口 D 执行完成')
        } else {
          reject('接口 D 执行失败')
        }
      }, 1 * 1000);
    })
  }


  // async + await 必须配合 promise 使用，同时 async 和 await 必须一起使用
  // async + await 可以简化 promise 的异步操作，把 promise 的异步操作编程 【同步的写法】 
  // async：标记一个函数，把一个函数标记为 【异步函数】
  // await：需要在【异步函数】中使用，标记当前的操作为【异步操作】
  async function test() {
    const resA = await A();
    console.log(resA);
    const resB = await B();
    console.log(resB);
    const resC = await C();
    console.log(resC);
    const resD = await D();
    console.log(resD);
  }
  test()

</script>

</html>